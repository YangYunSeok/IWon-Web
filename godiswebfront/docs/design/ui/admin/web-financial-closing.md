# Web Admin 재무회계결산 관리 (FinancialClosing)

> 원본: `docs/기본설계문서/웹UI및설계가이드(관리자용).md` 9장.
> API: 백엔드 계약 확정 필요(TBD). UI 기준만 이관.

## 1. 목적

- 승인/거래 결과를 회계 관점으로 재구성하여 결산 산출물(보고서/내역)을 조회/다운로드.
- 기본은 조회 전용(Read-only). 결산 확정/마감 기능을 도입하면 별도 권한/프로세스가 필요.

## 2. 레이아웃

1) 상단
- 기준 기간 선택(월/분기/반기/년)
- 조회 / 초기화
- 다운로드

2) 중단
- 탭(Tab) 영역 (결산 기능별 전환)

3) 하단
- 선택된 탭 결과(요약 + 테이블)

탭(Tab) 구성

A) 재무회계분개 (결산대상: 발행/소각 승인내역)

- 목적: 결산 기간에 대해 *“어떤 이벤트가 어떤 분개로 잡히는지”*를 보여주는 근거 화면(원천→분개)
- MVP(1차)
  - 기간 선택(월 기준 추천) + 코인구분(포인트/결제)
  - 요약 카드: 총 발행/소각 건수, 금액, 순발행, 예상 분개 라인 수
  - 데이터 원천/매핑(명확화)
    - 결산대상 “이벤트”는 승인 유형 기준: 발행 = `ApprovalType.mint`, 소각 = `ApprovalType.burn`
    - “승인ID” = `approvalId`
    - “승인일시”(MVP) = 승인요청 생성 시각 `requestedAt` (승인 처리 시각이 필요하면 추후 `approvedAt` 등으로 확장)
    - “상태” = `ApprovalStatus` (`pending`/`approved`/`rejected`)
  - 리스트(핵심): 승인ID/승인일시/코인구분/이벤트(발행|소각)/수량·금액/상태
  - “분개 미리보기”: 차/대 계정 + 금액
  - 상세(드로어/모달): 이벤트 원천 + 분개 라인(차/대) 2~n줄

B) 결산보고서

- 목적: 분개/스냅샷을 기반으로 “요약 보고서” 제공(경영/회계용)
- MVP(1차)
  - 기간/코인구분 선택
  - 보고서 요약(표 1~2개)
  - 준비금 잔액(기초/증감/기말)
  - 발행부채 현황(기초/증감/기말)
  - (가능하면) 발행/소각 집계표
  - 다운로드(CSV/Excel): “데이터 덤프” 수준으로만 먼저

- UI 규칙
  - 기간 필터 기본값: 최근 마감 월(또는 최근 1개월)
  - “조회” 버튼으로 데이터 갱신(자동조회 최소화)
  - 다운로드 파일명 예시:
    - `FIN_CLOSE_{TAB}_{YYYYMM}.xlsx`
    - `FIN_CLOSE_{TAB}_{YYYYQ}.pdf`

## 3. API 플로우

### 3.1 최초 진입

- TBD (백엔드 계약 확정 필요)

### 3.2 사용자 액션

- 화면 진입/기간 변경/탭 변경 시
  - 해당 탭의 조회 API 호출 (TBD)
- 다운로드 클릭 시
  - 현재 탭 + 선택 기간 기준 다운로드 API 호출 (TBD)

### 3.3 추가 플로우

> API 계약이 확정되면 docs/design/api/web-admin.md에 `@codegen` 블록을 추가하고,
> 모델 의미는 docs/design/model/web-admin.md에 반영한다.

## 4. 상태 / 에러 / 빈 화면

- 로딩: TBD
- 빈 화면: 데이터 없음 → “조회된 데이터가 없습니다”
- 오류: 공통 오류 메시지(Toast/MessageBox)

## 5. 권한

- 기본 접근 권한: Approver 권장 (`ROLE_ADMIN_APPROVER`)
- 재무/감사 정책에 따라 별도 재무 역할(Role) 분리 가능
