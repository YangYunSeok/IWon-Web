# 웹 디자인 가이드 (관리자용)

이 문서는 **IWon 스테이블 코인 관리 시스템(Admin Web)**의 현행 UI/UX 가이드입니다. (업데이트 기준일: 2026-01-14)

* **시스템 목적**: 임직원 지갑 생성, 코인 발행/회수, 자금 흐름 모니터링 및 온체인 승인 관리
* **사용자 대상**: 담당자, 관리자  (Operator/Approver 권한 분리)
* **코인 종류**:
    1.  **복지코인**: 복지 포인트 지급용
    2.  **결제코인**: 사내/가맹점 결제용

---

## 0. Codegen 입력 포맷 최소 규격 v1 (참조)

본 문서는 **UI/UX 가이드**이며, 엔드포인트 단위 codegen 입력 소스는 아래 문서가 기준입니다.

- `docs/design/api/admin.md`

### 0.1. 공통 타입/enum (UI 표시용 요약)

| 이름 | 타입 | 설명 |
|---|---|---|
| UserRole | 'operator' \| 'approver' | 사용자 권한 등급 |
| WalletStatus | 'uncreated' \| 'active' \| 'frozen' | 지갑 상태 |
| TxType | 'mint' \| 'burn' \| 'transfer' | 트랜잭션 유형 |
| ApprovalStatus | 'pending' \| 'approved' \| 'rejected' | 승인 요청 상태 |

### 0.2. 공통 에러 코드 (UX 처리 관점)

- `DISCREPANCY_DETECTED`: DB-블록체인 잔액 불일치 → 대시보드 Red Alert 표시
- `INSUFFICIENT_RESERVE`: 준비금 부족 → 승인 불가/경고 모달
- `WALLET_NOT_FOUND`: 지갑 미생성 → 지갑 생성 버튼 유도

### 0.3. 권한/역할 정책 (SoD)

본 문서는 UI 표기상 `Operator/Approver`로 역할을 설명하며, 권한 코드는 아래를 따른다.

* 작성자(요청 생성/관리): `ROLE_ADMIN_OPERATOR`
* 승인자(승인/확정/감사): `ROLE_ADMIN_APPROVER`
* 조회 전용(공통 조회 화면): `ROLE_ADMIN_VIEWER`

### 0.4. 공통 조회/검색 정책 (Dashboard 제외)

대시보드를 제외한 대부분의 “조회(리스트/테이블)” 화면은 아래 공통 정책을 따른다.

* **부서(조직) 필터**: 부서(또는 부서 트리) 기준으로 대상자를 좁혀서 조회
* **이름 검색**: 이름 기준 부분일치 검색
* (권장) **키워드 검색**: `이름/사번/이메일` 등 사용자 식별자 통합 검색
* 상단에 검색 조건 영역 제공(필터/검색어/조회/초기화)
* 조건 변경 후 “조회(Search)” 버튼으로 실행(불필요한 자동조회 최소화)
* 결과는 페이징/정렬 지원(테이블)

---

## 1. 내비게이션 구조 (현행)
※ Godis-Web 플랫폼의 기능을 사용. 별도 구현 필요 없음. ※
* **Web Stack**
    * `Login` → (성공) `AdminConsole`
* **관리자 콘솔 (LNB/Sidebar 구조)**
    * **대시보드 (`Dashboard`)**: 전체 현황 및 Alert
    * **임직원 지갑 관리 (`WalletMgmt`)**: 지갑 생성 및 Key 관리
    * **코인 지급 관리 (`CoinDist`)**: 지급(Mint)/회수(Burn) 및 일괄 업로드
    * **거래 이력 조회 (`TxHistory`)**: 전체 트랜잭션 추적
  * **승인 관리 (`Approval`)**: 승인/반려 및 감사
  * **월별 지급 관리 (`MonthlyPlan`)**: 정기 지급 계획 및 확정
  * **재무회계결산 관리 (`FinancialClosing`)**: 결산 산출물 조회/다운로드

---

## 2. 로그인 화면 (Web)
※ Godis-Web 플랫폼의 기능을 사용. 별도 구현 필요 없음. ※
* **UI 구성(현행)**
    * 시스템 타이틀 `I-Won Admin System` + 중앙 로고
    * 입력
        * ID 입력
        * 비밀번호 입력
    * `로그인` 버튼

* **2차 인증(OTP) 단계(추후 개발 예정)**
※ 현재는 개발 보류. 추후 개발예정. 별도 구현 필요 없음. ※
    * 관리자 보안을 위해 로그인 성공 시 OTP 입력 모달 출력
    * Google Authenticator 등을 통한 6자리 코드 입력

---


## 3. 대시보드 (`Dashboard`)

시스템의 **재무 건전성, 발행 통제 상태, 온체인 처리 현황**을 실시간으로 모니터링하는 관리자 메인 화면입니다.

### 상단 영역 (Header / KPI Summary)

* **총 IWon 발행량 (Total Supply)**

  * 검증 로직

    * `전체 직원 DB 잔액 합계` ↔ `블록체인 실제 총 발행량` 실시간 비교
  * 상태 표시

    * 일치 시: **정상 (Green)**
    * 불일치 시: **불일치 발생 (Red Alert)**

      * `불일치 상세 리스트` 팝업 링크 제공
  * 보조 정보

    * 최종 검증 시각
    * 기준 블록 높이(Block Height)

---

### 바디 영역 (Main Body)

* **① 용도별 발행/유통 현황**

  * Chart

    * 복지코인 vs 결제코인 비율 (Pie Chart)
  * Data

    * DB 기준 유통량
    * 블록체인 기준 총량
    * 용도별 증감 추이(전일 대비)

* **② 금일 주요 지표 (Daily Metrics)**

  * 신규 지갑 생성 수
  * 금일 발행 총액 (Mint)
  * 금일 소각/사용 총액 (Burn / Payment)
  * 승인 대기 건수

* **③ 트랜잭션 모니터링**

  * 온체인 Pending 트랜잭션 리스트

    * Tx Hash / 유형 / 요청자 / 경과 시간
  * 최근 실패(Transaction Fail) 목록

    * 실패 사유 코드
    * `[재처리]` 버튼 제공

---

### 하단 영역 (Footer / Alert & System Status)

* **시스템 Alert 로그**

  * DB–온체인 불일치 이력
  * 승인 실패/차단 이력
* **시스템 상태**

  * 블록체인 노드 상태
  * 백엔드 API Health Check

---

## 4. 임직원 지갑 관리 (`WalletMgmt`)

임직원 지갑의 **생성, 상태, 키 관리**를 담당하는 관리 화면입니다.

### 상단 영역

* 검색/필터 Bar

  * 부서 / 재직 상태
  * 지갑 상태 (`미생성 / 활성 / 동결`)
  * `지갑 미생성자만 보기` 토글
* 요약 KPI

  * 전체 직원 수
  * 지갑 생성 완료 수
  * 미생성 수

---

### 바디 영역

* **임직원 지갑 리스트 (Table)**

  * 컬럼

    * 사번 / 성명 / 부서 / 직급
    * 지갑 주소 (Explorer 링크)
    * 지갑 상태
  * 상태 표시

    * 퇴사자: `Inactive` + 지갑 동결 아이콘

---

### 하단 영역

* **Action Bar**

  * `[지갑 생성]`

    * 선택 직원 대상 일괄 생성
  * `[개인키 백업]`

    * **Approver 전용**
    * 암호화 키 복구 / 재설정

---

## 5. 코인 지급 관리 (`CoinDist`)

코인 **지급(Mint), 회수(Burn), 대량 처리**를 수행하는 실행 화면입니다.

### 상단 영역

* 지급 대상 요약

  * 선택 인원 수
  * 총 금액 합계
* 현재 사용자 권한 표시

  * Operator / Approver

---

### 바디 영역

* **좌측: 대상 선택 영역**

  * 조직도 트리
  * 직원 검색 + 다중 선택

* **우측: 제어 패널 (Tab)**

  * Tab 1: 지급(Mint)

    * 코인 타입 선택
    * 수량 입력
    * 지급 사유
    * `지급 요청 생성`
  * Tab 2: 회수(Burn)

    * 퇴사/오지급 회수
    * 잔액 차감 + 소각
  * Tab 3: 일괄 업로드

    * Excel 업로드
    * 사전 유효성 검사 결과 미리보기

---

### 하단 영역

* 검증/경고 메시지

  * 잔액 부족
  * 지갑 미생성 대상 포함 여부
* 처리 결과 로그

---

## 6. 거래 이력 조회 (`TxHistory`)

모든 **온체인/오프체인 거래 흐름을 감사 관점에서 추적**하는 화면입니다.

### 상단 영역

* 검색 필터

  * 기간(Date Range)
  * 유형(Mint / Burn / Transfer)
  * 코인 타입
  * 통합 검색(사번/이름/TxHash)

---

### 바디 영역

* 거래 이력 테이블

  * Tx Hash (Explorer 링크)
  * 일시
  * 유형
  * Sender / Receiver
  * 상태 (성공/실패/대기)

---

### 하단 영역

* 페이지네이션
* 선택 거래 상세 미리보기 영역(확장 가능)

---

## 7. 승인 관리 (`Approval`)

외부(앱/시스템)에서 생성된 요청을 화면에서 **승인/반려**하는 화면입니다.

* 웹에서는 요청을 생성하지 않으며, 승인 관리 화면이 최종 통제 지점
* 승인 유형 예시
  - 가맹점 정산요청
  - 복지코인 → 네이버페이 전환 요청
  - 코인 지급(Mint)
  - 코인 회수(Burn)

### 상단 영역

* KPI 배너

  * 승인 대기 건수
  * 경고 발생 건수
  * 승인 후 예상 준비금 비율

---

### 바디 영역

* 승인 대기 목록 (Table)

  * 요청 유형
  * 요청 주체 (가맹점 / 시스템 / 관리자)
  * 가맹점명 또는 대상자
  * 요청 금액
  * 요청 일시
  * 상태 (승인대기 / 승인 / 반려)
  * `[상세보기]`

* 승인 상세 팝업

  * 공통
    - 첨부 / 증빙 자료
    - 승인 / 반려 (반려 사유 필수)
    - 승인 이력 타임라인
  * 유형별 상세
    - (정산요청) 정산 기간, 거래 요약(건수/총액/수수료/정산금액), (선택) 정산 내역 다운로드
    - (전환요청) 대상자, 전환 금액/사유
    - (Mint/Burn) Before/After 유통량 비교, 시스템 사전 검증 결과

---

### 하단 영역

* Action

  * `[승인 실행]`
  * `[반려]` + 사유 입력
* 실행 결과 로그 (Tx Hash, 블록 번호)

### 권한

* 승인 처리: Approver (`ROLE_ADMIN_APPROVER`)
* 조회 전용: Operator (`ROLE_ADMIN_OPERATOR`)

---

## 8. 월별 지급 대상자 관리 (`MonthlyPlan`)

정기 지급을 위한 **사전 계획 및 확정 관리** 화면입니다.

### 상단 영역

* 기준 월 선택 (`YYYY-MM`)
* 확정 상태 표시 (Draft / Confirmed)
* 검색/필터 (공통 정책)
  - 부서(조직)
  - 이름/키워드 검색

---

### 바디 영역

* 지급 대상자 테이블

  * 사번 / 성명 / 지급 금액 / 비고

---

### 하단 영역

* 주요 액션

  * `[전월 데이터 가져오기]`
  * `[대상자 추가]` / `[일괄 등록]`
  * `[수정]` / `[삭제]` (일괄 삭제 포함)
  * `[계획 확정]` (Approval 연계 권장)

### 권한

* 접근 권한: Operator (`ROLE_ADMIN_OPERATOR`)

---

## 9. 재무회계결산 관리 (`FinancialClosing`)

승인/거래 결과를 회계 관점으로 재구성하여 **결산 산출물(보고서/내역)**을 제공하는 조회 화면입니다.

### 공통 화면 구조

- 상단: 기준 기간 선택(월/분기/반기/년) + 조회/초기화 + 다운로드
- 중단: 탭(Tab) 영역 (결산 기능별 전환)
- 하단: 선택된 탭 결과 (요약 + 테이블)

### 탭 구성

1) 재무회계결산 내역 (기간별 분개 리스트)
2) 결산보고서 (기간 요약)
3) 준비금 계정 잔액 및 발행부채 현황 (포인트/결제 코인 분리)

### 다운로드 정책

- 다운로드는 “현재 탭 + 선택 기간” 기준으로 수행

### 권한

* 기본 접근 권한: Approver (`ROLE_ADMIN_APPROVER`) 권장
* 재무/감사 정책에 따라 별도 재무 역할(Role) 분리 가능

---