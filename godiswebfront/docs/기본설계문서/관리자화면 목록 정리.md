# 관리자 웹 화면 / 기능 / API / DB 정리 (v0.3)

---

## 0. 전체 관리자 업무 흐름 요약 (Overview)

```text

결제코인
월별 지급 대상자 관리 → 코인 지급 관리 (지급 요청 생성)  → 승인 관리 (온체인 반영 여부 결정)  → 거래 이력 조회 (결과 확인) → 대시보드 (집계/모니터링)
```

* 모든 코인 이동은 **요청 → 승인 → 체인 반영 → 이력 기록** 순서
* 관리자는 직접 체인을 조작하지 않으며, **승인 관리 화면이 최종 통제 지점**

---

## 0.1 권한 정책 (SoD)

* 작성자(ROLE_ADMIN_OPERATOR): 요청 생성·관리
* 승인자(ROLE_ADMIN_APPROVER): 승인/확정/감사
* 공통(ROLE_ADMIN_VIEWER): 조회 전용(외 공통 화면)

---

## 0.2 공통 조회/검색 정책 (Dashboard 제외)

대시보드를 제외한 **모든 화면의 “조회(리스트/테이블)” 기능**은 아래 공통 검색 정책을 따른다.

### 공통 검색 조건

* **부서(조직) 필터**: 부서(또는 부서 트리) 기준으로 대상자를 좁혀서 조회 가능
* **이름 검색**: 이름 기준 부분일치 검색 지원
* (권장) **키워드 검색**: `이름/사번/이메일` 등 화면 성격에 맞는 사용자 식별자를 함께 검색할 수 있도록 확장 가능
* (선택) 기간/상태/유형 등 **화면별 추가 필터**는 각 화면 요구에 맞게 별도 제공

### 공통 UX

* 상단에 검색 조건 영역 제공(필터/검색어 입력/조회/초기화)
* 조건 변경 후 “조회(Search)” 버튼으로 조회 실행(불필요한 자동조회 최소화)
* 결과는 페이징/정렬 지원(테이블)
* 데이터 없음/오류 표시는 공통 메시지 규칙을 따른다

---

## 1. Dashboard

* 파일명: `STOCOIN01S1.jsx`

### 주요 기능 (Excel 기준)

* 총 발행량 / 코인별 합계
* 금일 주요 지표
* DB vs 온체인 불일치 안내
* Pending Transaction 모니터링

### 연계 API

* `GET /admin/stats/supply`
* `GET /admin/stats/daily`

### 권한

* 접근 권한: `ROLE_ADMIN_VIEWER`
* 대상 역할:
  - 작성자(ROLE_ADMIN_OPERATOR)
  - 승인자(ROLE_ADMIN_APPROVER)

---

## 2. 임직원 지갑 관리 (Wallet Management)

* 파일명: `STOCOIN02S1.jsx`

### 주요 기능 (Excel 기준)

* 임직원 지갑 조회
* 지갑 생성
* 지갑 상태 관리

### 공통 조회/검색 (Wallet Management)

* 0.2 공통 조회/검색 정책 적용(부서/이름 등 필터로 대상자 검색)

### 연계 API

* `GET /admin/employees`
* `POST /admin/wallets/create`

### 권한

* 접근 권한: `ROLE_ADMIN_OPERATOR`
* 대상 역할:
  - 작성자(요청 생성자)

---

## 3. 코인 지급/회수 (CoinDist)

* 파일명: `STOCOIN03S1.jsx`

### 주요 기능 (Excel 기준)

* 지급(Mint) / 회수(Burn) 요청 생성
* 일괄 지급(Bulk)

### 공통 조회/검색 (CoinDist)

* 0.2 공통 조회/검색 정책 적용(부서/이름 등 필터로 대상자 검색)

### 연계 API

* `POST /admin/mint/request`
* `POST /admin/burn/request`

### 권한

* 접근 권한: `ROLE_ADMIN_OPERATOR`
* 대상 역할:
  - 작성자(요청 생성자)

### 비고

* 일괄 업로드 전용 API 미정

---

## 4. 거래 이력 조회 (TxHistory)

* 파일명: `STOCOIN04S1.jsx`

### 주요 기능 (Excel 기준)

* 트랜잭션 내역 조회
* 상태/유형/금액/TxHash 확인

### 공통 조회/검색 (TxHistory)

* 0.2 공통 조회/검색 정책 적용(부서/이름 등 필터로 대상자/요청 주체 검색)

### 연계 API

* `GET /admin/transactions`

### 권한

* 접근 권한: `ROLE_ADMIN_VIEWER`
* 대상 역할:
  - 작성자(ROLE_ADMIN_OPERATOR)
  - 승인자(ROLE_ADMIN_APPROVER)

---

## 5. 승인 관리 (Approval)

* 파일명: `STOCOIN05S1.jsx`

### 역할 정의

* 모든 승인 대상 요청의 **단일 진입점**
* 웹에서는 요청을 생성하지 않음
* 외부(앱/시스템)에서 생성된 요청을 승인/반려

---

### 5.1 승인 목록

**승인 유형**

* 가맹점 정산요청 (앱에서 생성)
* 복지코인 → 네이버페이 전환 요청
* 코인 지급(Mint)
* 코인 회수(Burn)

**목록 표시 항목**

* 요청 유형
* 요청 주체 (가맹점 / 시스템 / 관리자)
* 가맹점명 또는 대상자
* 요청 금액
* 요청 일시
* 상태 (승인대기 / 승인 / 반려)

---

### 공통 조회/검색 (Approval)

* 0.2 공통 조회/검색 정책 적용(부서/이름 등 필터로 대상자/요청 주체 검색)

---

### 5.2 승인 상세

#### 가맹점 정산요청

* 가맹점 정보
* 정산 기간
* 거래 요약

  * 거래 건수
  * 총 거래 금액
  * 수수료
  * 정산 대상 금액
* 첨부 / 증빙 자료
* 승인 / 반려 (반려 사유 필수)
* 승인 이력 타임라인
* (선택) 정산 내역 엑셀 다운로드

#### 복지코인 → 네이버페이 전환

* 대상자
* 전환 금액
* 전환 사유
* 첨부 자료
* 승인 / 반려

---

### 연계 API

* `GET /admin/approvals`
* `GET /admin/approvals/{approvalId}`
* `POST /admin/approvals/{approvalId}/confirm`
* `POST /admin/approvals/{approvalId}/reject`

---

### 권한

* 승인 처리: `ROLE_ADMIN_APPROVER`
* 조회 전용: `ROLE_ADMIN_OPERATOR`

---

## 6. 월별 지급 대상자 관리 (Monthly Payment Planning)

* 파일명: `STOCOIN06S1.jsx`

### 주요 기능 (Excel 기준)

* 월별 지급 대상자 조회
* 일괄 등록/수정/삭제
* 전월 데이터 Import
* 지급 확정(Approval 연계 권장)

### 공통 조회/검색 (Monthly Payment Planning)

* 0.2 공통 조회/검색 정책 적용(부서/이름 등 필터로 대상자 검색)

### 연계 API

* `GET /admin/monthly-payees` (월지급 대상자 조회)
* `POST /admin/monthly-payees/{id}` (월지급 대상자 등록/수정)
* `PUT /admin/monthly-payees/bulk-delete` (월지급 대상자 삭제)
* `DELETE /admin/monthly-payees/{year}-{month}/confirm` (월지급 대상자 확정)


### 권한

* 접근 권한: `ROLE_ADMIN_OPERATOR`
* 대상 역할:
  - 작성자(요청 생성자)

---

## 7. 보고서 (Reports)

* 파일명: `STOCOIN07S1.jsx`

보고서 화면은 **승인 및 집행이 완료된 데이터를 기반으로 결과를 집계·분석하는 조회 전용 화면**이다.  
개별 요청 단위의 처리는 승인 관리(Approval) 화면에서 수행하며,  
본 화면은 **재무·운영 의사결정을 위한 요약 정보 제공**을 목적으로 한다.

---

### 7.0 공통 정책 (Common)

#### 화면 구조
- 상단: 공통 검색 조건 영역 (기간 선택 / 검색 / 초기화 / 다운로드)
- 중단: 보고서 탭(Tab) 영역
- 하단: 선택된 탭의 결과 영역 (요약 지표 + 테이블)

#### 공통 UX/기능
- 조회 전용(Read-only)
- 기간 필터 기본값: 현재 일자 기준 최근 1개월
- 조건 변경 후 “조회” 버튼 클릭 시 데이터 갱신
- “초기화” 버튼 제공
- “Excel 다운로드” 버튼 제공  
  (현재 선택된 탭 + 검색 조건 기준)
- 페이징 / 정렬 (테이블)
- 데이터 없음: “조회된 데이터가 없습니다”
- 오류 발생 시 공통 오류 메시지 노출

#### 권한
- 기본 접근 권한: `ROLE_ADMIN_VIEWER`
- 재무 성격의 보고서는 `ROLE_ADMIN_APPROVER` 이상 권장

---

### 7.1 탭 구성 (Tabs)

보고서 화면은 아래 **3개 탭**으로 구성한다.

1) 코인 지급 비용 현황  
2) 부서별 코인 보유·사용 현황  
3) 가맹점 결제 분석  

> 탭 전환 시 공통 검색 조건(기간 등)은 유지되며,  
> 필요 시 탭별 추가 필터를 조건 영역 하단에 노출할 수 있다.

---

### 7.2 탭 1: 코인 지급 비용 현황

#### 목적
코인 지급을 비용 관점에서 집계하여  
월·분기 단위 예산 관리 및 회계 대응에 활용한다.  
기간별 코인 정책으로 발생한 실제 비용 규모를 명확히 파악한다.

> “이번 기간 동안 코인 지급으로 얼마의 비용이 발생했는가?”

#### 주요 조회 내용
- 기간별 코인 지급 총액
- 코인 유형별 지급 금액
- 지급 사유/정책 단위 집계 (가능한 경우)

#### 활용 관점
- 예산 수립 및 집행 관리
- 회계 증빙 자료
- 정책별 비용 영향 분석

---

### 7.3 탭 2: 부서별 코인 보유·사용 현황

#### 목적
부서별 코인 보유량과 사용량을 비교·분석하여  
코인 보상 정책의 도달률과 실제 활용도를 평가한다.  
내부 보상 제도가 어느 조직에서 가장 활발히 작동하는지 파악한다.

> “어느 부서에서 코인 보상이 가장 적극적으로 활용되고 있는가?”

#### 주요 조회 내용
- 부서별 코인 보유 잔액
- 부서별 기간 내 사용(소진) 금액
- 보유 대비 사용 비율

#### 활용 관점
- 조직별 보상 정책 효과 분석
- 저활성 부서 식별
- 내부 인센티브 구조 개선

---

### 7.4 탭 3: 가맹점 결제 분석

#### 목적
가맹점별 거래 규모와 이용 빈도를 분석하여  
실제로 활성화된 가맹점을 파악하고,  
사내 결제 생태계의 건강도를 진단한다.

> “정산은 되었지만, 실제로 많이 이용되는 가맹점은 어디인가?”

#### 주요 조회 내용
- 가맹점별 거래 건수
- 가맹점별 거래 금액
- 기간별 거래 추이

#### 활용 관점
- 가맹점 성과 평가
- 비활성 가맹점 정리 판단
- 신규 제휴 및 파트너십 전략 수립

---

### 7.5 다운로드 정책 (Excel Export)

- Excel 다운로드는 **현재 선택된 탭과 검색 조건 기준**으로 수행한다.
- 파일명 규칙 예시:
  - `REPORT_{TAB_NAME}_{FROM}_{TO}.xlsx`
  - 예: `REPORT_COIN_COST_20260101_20260131.xlsx`

---